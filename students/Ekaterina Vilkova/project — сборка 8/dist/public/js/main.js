!function(t){var n={};function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:o})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(e.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var r in t)e.d(o,r,function(n){return t[n]}.bind(null,r));return o},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=2)}([function(t,n,e){},function(t,n,e){},function(t,n,e){"use strict";e.r(n);var o={el:"#app",data:{cartVisiblity:!1,catalogUrl:"/catalogData.json",products:[],filteredProducts:[],imgCart:"https://placehold.it/100x80"},methods:{getJSON:function(t){return fetch(t).then((function(t){return t.json()}))},postJSON:function(t,n){return fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json()}))},putJSON:function(t,n){return fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({some:n})}).then((function(t){return t.json()}))},deleteJSON:function(t){return fetch(t,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))},onCartBtnClick:function(){this.cartVisiblity=!this.cartVisiblity},filterProducts:function(t){var n=this;this.products=this.$children[1].items,this.products.forEach((function(e){-1!=e.product_name.search(t)?n.filteredProducts.push(e):n.filteredProducts=[]})),console.log(this.filteredProducts)}},mounted:function(){console.log(this)},components:{catalog:{data:function(){return{items:[],imgCatalog:"https://placehold.it/200x150"}},methods:{addProduct:function(t){console.log(t.product_name)}},mounted:function(){var t=this;this.$parent.getJSON("/catalog").then((function(n){return t.items=n}))},template:'\n    <div class="products">\n        <catalog-item v-for="product of items" :img="imgCatalog" :el="product" :key="product.id_product"/>\n    </div>\n    ',components:{"catalog-item":{props:["img","el"],template:'\n    <div class="product-item">\n        <img :src="img" alt="Some img">\n        <div class="desc">\n            <h3>{{ el.product_name }}</h3>\n            <p>{{ el.price }} $</p>\n            <button class="buy-btn" @click="$root.$refs.cartcomp.addProduct(el)">Купить</button>\n        </div>\n    </div>\n    '}}},cart:{data:function(){return{items:[],imgCart:"https://placehold.it/100x80"}},props:["visible"],methods:{addProduct:function(t){var n=this,e=this.items.find((function(n){return n.id_product===t.id_product}));if(e)this.$parent.putJSON("/cart/".concat(e.id_product),1).then((function(t){t.result&&e.quantity++}));else{var o=Object.assign({},t,{quantity:1});this.$parent.postJSON("/cart",o).then((function(t){t.result&&n.items.push(o)}))}},delProduct:function(t){var n=this;t.quantity>1?this.$parent.putJSON("/cart/".concat(t.id_product),-1).then((function(n){n.result&&t.quantity--})):this.$parent.deleteJSON("/cart/".concat(t.id_product)).then((function(e){e.result&&n.items.splice(n.items.indexOf(t),1)}))}},mounted:function(){var t=this;this.$parent.getJSON("/cart").then((function(n){return t.items=n.contents}))},template:'\n                <div class="cart-block" v-show="visible">\n                    <cart-item v-for="product of items" :img="imgCart" :el="product" :key="product.id_product"/>\n                </div>\n              ',components:{"cart-item":catalogItem}}}};e(0),e(1),new Vue(o)}]);